{"ast":null,"code":"var _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nimport cssifyDeclaration from 'css-in-js-utils/lib/cssifyDeclaration';\nimport arrayEach from 'fast-loops/lib/arrayEach';\nimport arrayReduce from 'fast-loops/lib/arrayReduce';\nimport isPlainObject from 'isobject';\nimport { generateDeclarationReference, generateCombinedMediaQuery, generateCSSSelector, isMediaQuery, isNestedSelector, isUndefinedValue, isSupport, normalizeNestedProperty, processStyleWithPlugins, STATIC_TYPE, RULE_TYPE, KEYFRAME_TYPE, FONT_TYPE, CLEAR_TYPE } from 'fela-utils';\nimport cssifyFontFace from './cssifyFontFace';\nimport cssifyKeyframe from './cssifyKeyframe';\nimport cssifyKeyframeRule from './cssifyKeyframeRule';\nimport cssifyStaticStyle from './cssifyStaticStyle';\nimport _generateAnimationName from './generateAnimationName';\nimport _generateClassName from './generateClassName';\nimport generateFontSource from './generateFontSource';\nimport generateStaticReference from './generateStaticReference';\nimport getFontLocals from './getFontLocals';\nimport isSafeClassName from './isSafeClassName';\nimport toCSSString from './toCSSString';\nimport validateSelectorPrefix from './validateSelectorPrefix';\nimport sortMediaQuery from './sortMediaQuery';\nexport default function createRenderer() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var renderer = {\n    listeners: [],\n    keyframePrefixes: config.keyframePrefixes || ['-webkit-', '-moz-'],\n    plugins: config.plugins || [],\n    sortMediaQuery: config.sortMediaQuery || sortMediaQuery(config.mediaQueryOrder),\n    supportQueryOrder: config.supportQueryOrder || [],\n    styleNodeAttributes: config.styleNodeAttributes || {},\n    propertyPriority: config.propertyPriority || {},\n    ruleOrder: [/^:link/, /^:visited/, /^:hover/, /^:focus-within/, /^:focus/, /^:active/],\n    selectorPrefix: validateSelectorPrefix(config.selectorPrefix),\n    specificityPrefix: config.specificityPrefix || '',\n    filterClassName: config.filterClassName || isSafeClassName,\n    devMode: config.devMode || false,\n    uniqueRuleIdentifier: 0,\n    uniqueKeyframeIdentifier: 0,\n    nodes: {},\n    scoreIndex: {},\n    // use a flat cache object with pure string references\n    // to achieve maximal lookup performance and memoization speed\n    cache: {},\n    getNextRuleIdentifier: function getNextRuleIdentifier() {\n      return ++renderer.uniqueRuleIdentifier;\n    },\n    getNextKeyframeIdentifier: function getNextKeyframeIdentifier() {\n      return ++renderer.uniqueKeyframeIdentifier;\n    },\n    renderRule: function renderRule(rule) {\n      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return renderer._renderStyle(rule(props, renderer), props);\n    },\n    renderKeyframe: function renderKeyframe(keyframe) {\n      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var resolvedKeyframe = keyframe(props, renderer);\n      var processedKeyframe = processStyleWithPlugins(renderer, resolvedKeyframe, KEYFRAME_TYPE, props);\n      var keyframeReference = cssifyKeyframeRule(processedKeyframe);\n\n      if (!renderer.cache.hasOwnProperty(keyframeReference)) {\n        // use another unique identifier to ensure minimal css markup\n        var animationName = renderer.selectorPrefix + renderer.generateAnimationName(props);\n        var cssKeyframe = cssifyKeyframe(processedKeyframe, animationName, renderer.keyframePrefixes, keyframeReference);\n        var change = {\n          type: KEYFRAME_TYPE,\n          keyframe: cssKeyframe,\n          name: animationName\n        };\n        renderer.cache[keyframeReference] = change;\n\n        renderer._emitChange(change);\n      }\n\n      return renderer.cache[keyframeReference].name;\n    },\n    generateAnimationName: function generateAnimationName(_props) {\n      return _generateAnimationName(renderer.getNextKeyframeIdentifier());\n    },\n    renderFont: function renderFont(family, files) {\n      var properties = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      var localAlias = properties.localAlias,\n          otherProperties = _objectWithoutProperties(properties, ['localAlias']);\n\n      var fontReference = family + JSON.stringify(properties);\n      var fontLocals = getFontLocals(localAlias);\n\n      if (!renderer.cache.hasOwnProperty(fontReference)) {\n        var fontFamily = toCSSString(family);\n\n        var fontFace = _extends({}, otherProperties, {\n          src: generateFontSource(files, fontLocals),\n          fontFamily: fontFamily\n        });\n\n        var cssFontFace = cssifyFontFace(fontFace);\n        var change = {\n          type: FONT_TYPE,\n          fontFace: cssFontFace,\n          fontFamily: fontFamily\n        };\n        renderer.cache[fontReference] = change;\n\n        renderer._emitChange(change);\n      }\n\n      return renderer.cache[fontReference].fontFamily;\n    },\n    renderStatic: function renderStatic(staticStyle, selector) {\n      var staticReference = generateStaticReference(staticStyle, selector);\n\n      if (!renderer.cache.hasOwnProperty(staticReference)) {\n        var cssDeclarations = cssifyStaticStyle(staticStyle, renderer);\n        var change = {\n          type: STATIC_TYPE,\n          css: cssDeclarations,\n          selector: selector\n        };\n        renderer.cache[staticReference] = change;\n\n        renderer._emitChange(change);\n      }\n    },\n    subscribe: function subscribe(callback) {\n      renderer.listeners.push(callback);\n      return {\n        unsubscribe: function unsubscribe() {\n          return renderer.listeners.splice(renderer.listeners.indexOf(callback), 1);\n        }\n      };\n    },\n    clear: function clear() {\n      renderer.uniqueRuleIdentifier = 0;\n      renderer.uniqueKeyframeIdentifier = 0;\n      renderer.cache = {};\n\n      renderer._emitChange({\n        type: CLEAR_TYPE\n      });\n    },\n    _renderStyle: function _renderStyle() {\n      var style = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var processedStyle = processStyleWithPlugins(renderer, style, RULE_TYPE, props, renderer.unoptimizedPlugins || renderer.plugins);\n      return renderer._renderStyleToClassNames(processedStyle).slice(1);\n    },\n    _renderStyleToClassNames: function _renderStyleToClassNames(_ref) {\n      var pseudo = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var media = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n      var support = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n\n      var _className = _ref._className,\n          style = _objectWithoutProperties(_ref, ['_className']);\n\n      var classNames = _className ? ' ' + _className : '';\n\n      for (var property in style) {\n        var value = style[property];\n\n        if (isPlainObject(value)) {\n          if (isNestedSelector(property)) {\n            classNames += renderer._renderStyleToClassNames(value, pseudo + normalizeNestedProperty(property), media, support);\n          } else if (isMediaQuery(property)) {\n            var combinedMediaQuery = generateCombinedMediaQuery(media, property.slice(6).trim());\n            classNames += renderer._renderStyleToClassNames(value, pseudo, combinedMediaQuery, support);\n          } else if (isSupport(property)) {\n            var combinedSupport = generateCombinedMediaQuery(support, property.slice(9).trim());\n            classNames += renderer._renderStyleToClassNames(value, pseudo, media, combinedSupport);\n          } else {\n            console.warn('The object key \"' + property + '\" is not a valid nested key in Fela.\\nMaybe you forgot to add a plugin to resolve it?\\nCheck http://fela.js.org/docs/basics/Rules.html#styleobject for more information.');\n          }\n        } else {\n          var declarationReference = generateDeclarationReference(property, value, pseudo, media, support);\n\n          if (renderer.cacheMap) {\n            if (!renderer.cacheMap.hasOwnProperty(declarationReference)) {\n              var pluginInterface = {\n                property: property,\n                value: value,\n                pseudo: pseudo,\n                media: media,\n                support: support\n              };\n              var processed = arrayReduce(renderer.optimizedPlugins, function (processed, plugin) {\n                return plugin(processed, renderer);\n              }, pluginInterface);\n              var cacheReference = generateDeclarationReference(processed.property, processed.value, processed.pseudo, processed.media, processed.support);\n\n              if (!renderer.cache.hasOwnProperty(cacheReference)) {\n                renderer._renderStyleToCache(cacheReference, processed.property, processed.value, processed.pseudo, processed.media, processed.support);\n              }\n\n              renderer.cacheMap[declarationReference] = cacheReference;\n            }\n\n            declarationReference = renderer.cacheMap[declarationReference];\n          }\n\n          if (!renderer.cache.hasOwnProperty(declarationReference)) {\n            renderer._renderStyleToCache(declarationReference, property, value, pseudo, media, support);\n          }\n\n          var cachedClassName = renderer.cache[declarationReference].className; // only append if we got a class cached\n\n          if (cachedClassName) {\n            classNames += ' ' + cachedClassName;\n          }\n        }\n      }\n\n      return classNames;\n    },\n    _renderStyleToCache: function _renderStyleToCache(reference, property, value, pseudo, media, support) {\n      // we remove undefined values to enable\n      // usage of optional props without side-effects\n      if (isUndefinedValue(value)) {\n        renderer.cache[reference] = {\n          className: ''\n        };\n        return;\n      }\n\n      var className = renderer.selectorPrefix + renderer.generateClassName(property, value, pseudo, media, support);\n      var declaration = cssifyDeclaration(property, value);\n      var selector = generateCSSSelector(className, pseudo, config.specificityPrefix, renderer.propertyPriority[property]);\n      var change = {\n        type: RULE_TYPE,\n        className: className,\n        selector: selector,\n        declaration: declaration,\n        pseudo: pseudo,\n        media: media,\n        support: support\n      };\n      renderer.cache[reference] = change;\n\n      renderer._emitChange(change);\n    },\n    generateClassName: function generateClassName(property, value, pseudo, media, support) {\n      return _generateClassName(renderer.getNextRuleIdentifier, renderer.filterClassName);\n    },\n    _emitChange: function _emitChange(change) {\n      arrayEach(renderer.listeners, function (listener) {\n        return listener(change);\n      });\n    }\n  }; // initial setup\n\n  renderer.keyframePrefixes.push('');\n\n  if (config.optimizeCaching) {\n    renderer.optimizedPlugins = renderer.plugins.filter(function (plugin) {\n      return plugin.optimized;\n    }).map(function (plugin) {\n      return plugin.optimized;\n    }); // only enable the cache map if we have optimized plugins\n\n    if (renderer.optimizedPlugins.length > 0) {\n      renderer.cacheMap = {};\n      renderer.unoptimizedPlugins = renderer.plugins.filter(function (plugin) {\n        return !plugin.optimized;\n      });\n    }\n  }\n\n  if (config.enhancers) {\n    arrayEach(config.enhancers, function (enhancer) {\n      renderer = enhancer(renderer);\n    });\n  }\n\n  return renderer;\n}","map":{"version":3,"sources":["C:/Users/jophy/Documents/volvo-cars/node_modules/fela/es/createRenderer.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_objectWithoutProperties","obj","keys","indexOf","cssifyDeclaration","arrayEach","arrayReduce","isPlainObject","generateDeclarationReference","generateCombinedMediaQuery","generateCSSSelector","isMediaQuery","isNestedSelector","isUndefinedValue","isSupport","normalizeNestedProperty","processStyleWithPlugins","STATIC_TYPE","RULE_TYPE","KEYFRAME_TYPE","FONT_TYPE","CLEAR_TYPE","cssifyFontFace","cssifyKeyframe","cssifyKeyframeRule","cssifyStaticStyle","_generateAnimationName","_generateClassName","generateFontSource","generateStaticReference","getFontLocals","isSafeClassName","toCSSString","validateSelectorPrefix","sortMediaQuery","createRenderer","config","undefined","renderer","listeners","keyframePrefixes","plugins","mediaQueryOrder","supportQueryOrder","styleNodeAttributes","propertyPriority","ruleOrder","selectorPrefix","specificityPrefix","filterClassName","devMode","uniqueRuleIdentifier","uniqueKeyframeIdentifier","nodes","scoreIndex","cache","getNextRuleIdentifier","getNextKeyframeIdentifier","renderRule","rule","props","_renderStyle","renderKeyframe","keyframe","resolvedKeyframe","processedKeyframe","keyframeReference","animationName","generateAnimationName","cssKeyframe","change","type","name","_emitChange","_props","renderFont","family","files","properties","localAlias","otherProperties","fontReference","JSON","stringify","fontLocals","fontFamily","fontFace","src","cssFontFace","renderStatic","staticStyle","selector","staticReference","cssDeclarations","css","subscribe","callback","push","unsubscribe","splice","clear","style","processedStyle","unoptimizedPlugins","_renderStyleToClassNames","slice","_ref","pseudo","media","support","_className","classNames","property","value","combinedMediaQuery","trim","combinedSupport","console","warn","declarationReference","cacheMap","pluginInterface","processed","optimizedPlugins","plugin","cacheReference","_renderStyleToCache","cachedClassName","className","reference","generateClassName","declaration","listener","optimizeCaching","filter","optimized","map","enhancers","enhancer"],"mappings":"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","sourcesContent":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nimport cssifyDeclaration from 'css-in-js-utils/lib/cssifyDeclaration';\nimport arrayEach from 'fast-loops/lib/arrayEach';\nimport arrayReduce from 'fast-loops/lib/arrayReduce';\nimport isPlainObject from 'isobject';\n\nimport { generateDeclarationReference, generateCombinedMediaQuery, generateCSSSelector, isMediaQuery, isNestedSelector, isUndefinedValue, isSupport, normalizeNestedProperty, processStyleWithPlugins, STATIC_TYPE, RULE_TYPE, KEYFRAME_TYPE, FONT_TYPE, CLEAR_TYPE } from 'fela-utils';\n\nimport cssifyFontFace from './cssifyFontFace';\nimport cssifyKeyframe from './cssifyKeyframe';\nimport cssifyKeyframeRule from './cssifyKeyframeRule';\nimport cssifyStaticStyle from './cssifyStaticStyle';\nimport _generateAnimationName from './generateAnimationName';\nimport _generateClassName from './generateClassName';\nimport generateFontSource from './generateFontSource';\nimport generateStaticReference from './generateStaticReference';\nimport getFontLocals from './getFontLocals';\nimport isSafeClassName from './isSafeClassName';\nimport toCSSString from './toCSSString';\nimport validateSelectorPrefix from './validateSelectorPrefix';\nimport sortMediaQuery from './sortMediaQuery';\n\nexport default function createRenderer() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var renderer = {\n    listeners: [],\n    keyframePrefixes: config.keyframePrefixes || ['-webkit-', '-moz-'],\n    plugins: config.plugins || [],\n    sortMediaQuery: config.sortMediaQuery || sortMediaQuery(config.mediaQueryOrder),\n    supportQueryOrder: config.supportQueryOrder || [],\n    styleNodeAttributes: config.styleNodeAttributes || {},\n    propertyPriority: config.propertyPriority || {},\n    ruleOrder: [/^:link/, /^:visited/, /^:hover/, /^:focus-within/, /^:focus/, /^:active/],\n    selectorPrefix: validateSelectorPrefix(config.selectorPrefix),\n    specificityPrefix: config.specificityPrefix || '',\n    filterClassName: config.filterClassName || isSafeClassName,\n    devMode: config.devMode || false,\n\n    uniqueRuleIdentifier: 0,\n    uniqueKeyframeIdentifier: 0,\n\n    nodes: {},\n    scoreIndex: {},\n    // use a flat cache object with pure string references\n    // to achieve maximal lookup performance and memoization speed\n    cache: {},\n\n    getNextRuleIdentifier: function getNextRuleIdentifier() {\n      return ++renderer.uniqueRuleIdentifier;\n    },\n    getNextKeyframeIdentifier: function getNextKeyframeIdentifier() {\n      return ++renderer.uniqueKeyframeIdentifier;\n    },\n    renderRule: function renderRule(rule) {\n      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      return renderer._renderStyle(rule(props, renderer), props);\n    },\n    renderKeyframe: function renderKeyframe(keyframe) {\n      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var resolvedKeyframe = keyframe(props, renderer);\n      var processedKeyframe = processStyleWithPlugins(renderer, resolvedKeyframe, KEYFRAME_TYPE, props);\n\n      var keyframeReference = cssifyKeyframeRule(processedKeyframe);\n\n      if (!renderer.cache.hasOwnProperty(keyframeReference)) {\n        // use another unique identifier to ensure minimal css markup\n        var animationName = renderer.selectorPrefix + renderer.generateAnimationName(props);\n\n        var cssKeyframe = cssifyKeyframe(processedKeyframe, animationName, renderer.keyframePrefixes, keyframeReference);\n\n        var change = {\n          type: KEYFRAME_TYPE,\n          keyframe: cssKeyframe,\n          name: animationName\n        };\n\n        renderer.cache[keyframeReference] = change;\n        renderer._emitChange(change);\n      }\n\n      return renderer.cache[keyframeReference].name;\n    },\n    generateAnimationName: function generateAnimationName(_props) {\n      return _generateAnimationName(renderer.getNextKeyframeIdentifier());\n    },\n    renderFont: function renderFont(family, files) {\n      var properties = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      var localAlias = properties.localAlias,\n          otherProperties = _objectWithoutProperties(properties, ['localAlias']);\n\n      var fontReference = family + JSON.stringify(properties);\n      var fontLocals = getFontLocals(localAlias);\n\n      if (!renderer.cache.hasOwnProperty(fontReference)) {\n        var fontFamily = toCSSString(family);\n\n        var fontFace = _extends({}, otherProperties, {\n          src: generateFontSource(files, fontLocals),\n          fontFamily: fontFamily\n        });\n\n        var cssFontFace = cssifyFontFace(fontFace);\n\n        var change = {\n          type: FONT_TYPE,\n          fontFace: cssFontFace,\n          fontFamily: fontFamily\n        };\n\n        renderer.cache[fontReference] = change;\n        renderer._emitChange(change);\n      }\n\n      return renderer.cache[fontReference].fontFamily;\n    },\n    renderStatic: function renderStatic(staticStyle, selector) {\n      var staticReference = generateStaticReference(staticStyle, selector);\n\n      if (!renderer.cache.hasOwnProperty(staticReference)) {\n        var cssDeclarations = cssifyStaticStyle(staticStyle, renderer);\n\n        var change = {\n          type: STATIC_TYPE,\n          css: cssDeclarations,\n          selector: selector\n        };\n\n        renderer.cache[staticReference] = change;\n        renderer._emitChange(change);\n      }\n    },\n    subscribe: function subscribe(callback) {\n      renderer.listeners.push(callback);\n\n      return {\n        unsubscribe: function unsubscribe() {\n          return renderer.listeners.splice(renderer.listeners.indexOf(callback), 1);\n        }\n      };\n    },\n    clear: function clear() {\n      renderer.uniqueRuleIdentifier = 0;\n      renderer.uniqueKeyframeIdentifier = 0;\n      renderer.cache = {};\n\n      renderer._emitChange({\n        type: CLEAR_TYPE\n      });\n    },\n    _renderStyle: function _renderStyle() {\n      var style = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var processedStyle = processStyleWithPlugins(renderer, style, RULE_TYPE, props, renderer.unoptimizedPlugins || renderer.plugins);\n\n      return renderer._renderStyleToClassNames(processedStyle).slice(1);\n    },\n    _renderStyleToClassNames: function _renderStyleToClassNames(_ref) {\n      var pseudo = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var media = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n      var support = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n\n      var _className = _ref._className,\n          style = _objectWithoutProperties(_ref, ['_className']);\n\n      var classNames = _className ? ' ' + _className : '';\n\n      for (var property in style) {\n        var value = style[property];\n\n        if (isPlainObject(value)) {\n          if (isNestedSelector(property)) {\n            classNames += renderer._renderStyleToClassNames(value, pseudo + normalizeNestedProperty(property), media, support);\n          } else if (isMediaQuery(property)) {\n            var combinedMediaQuery = generateCombinedMediaQuery(media, property.slice(6).trim());\n            classNames += renderer._renderStyleToClassNames(value, pseudo, combinedMediaQuery, support);\n          } else if (isSupport(property)) {\n            var combinedSupport = generateCombinedMediaQuery(support, property.slice(9).trim());\n            classNames += renderer._renderStyleToClassNames(value, pseudo, media, combinedSupport);\n          } else {\n            console.warn('The object key \"' + property + '\" is not a valid nested key in Fela.\\nMaybe you forgot to add a plugin to resolve it?\\nCheck http://fela.js.org/docs/basics/Rules.html#styleobject for more information.');\n          }\n        } else {\n          var declarationReference = generateDeclarationReference(property, value, pseudo, media, support);\n\n          if (renderer.cacheMap) {\n            if (!renderer.cacheMap.hasOwnProperty(declarationReference)) {\n              var pluginInterface = {\n                property: property,\n                value: value,\n                pseudo: pseudo,\n                media: media,\n                support: support\n              };\n\n              var processed = arrayReduce(renderer.optimizedPlugins, function (processed, plugin) {\n                return plugin(processed, renderer);\n              }, pluginInterface);\n\n              var cacheReference = generateDeclarationReference(processed.property, processed.value, processed.pseudo, processed.media, processed.support);\n\n              if (!renderer.cache.hasOwnProperty(cacheReference)) {\n                renderer._renderStyleToCache(cacheReference, processed.property, processed.value, processed.pseudo, processed.media, processed.support);\n              }\n\n              renderer.cacheMap[declarationReference] = cacheReference;\n            }\n\n            declarationReference = renderer.cacheMap[declarationReference];\n          }\n\n          if (!renderer.cache.hasOwnProperty(declarationReference)) {\n            renderer._renderStyleToCache(declarationReference, property, value, pseudo, media, support);\n          }\n\n          var cachedClassName = renderer.cache[declarationReference].className;\n\n          // only append if we got a class cached\n          if (cachedClassName) {\n            classNames += ' ' + cachedClassName;\n          }\n        }\n      }\n\n      return classNames;\n    },\n    _renderStyleToCache: function _renderStyleToCache(reference, property, value, pseudo, media, support) {\n      // we remove undefined values to enable\n      // usage of optional props without side-effects\n      if (isUndefinedValue(value)) {\n        renderer.cache[reference] = {\n          className: ''\n        };\n\n        return;\n      }\n\n      var className = renderer.selectorPrefix + renderer.generateClassName(property, value, pseudo, media, support);\n\n      var declaration = cssifyDeclaration(property, value);\n      var selector = generateCSSSelector(className, pseudo, config.specificityPrefix, renderer.propertyPriority[property]);\n\n      var change = {\n        type: RULE_TYPE,\n        className: className,\n        selector: selector,\n        declaration: declaration,\n        pseudo: pseudo,\n        media: media,\n        support: support\n      };\n\n      renderer.cache[reference] = change;\n      renderer._emitChange(change);\n    },\n    generateClassName: function generateClassName(property, value, pseudo, media, support) {\n      return _generateClassName(renderer.getNextRuleIdentifier, renderer.filterClassName);\n    },\n    _emitChange: function _emitChange(change) {\n      arrayEach(renderer.listeners, function (listener) {\n        return listener(change);\n      });\n    }\n  };\n\n  // initial setup\n  renderer.keyframePrefixes.push('');\n\n  if (config.optimizeCaching) {\n    renderer.optimizedPlugins = renderer.plugins.filter(function (plugin) {\n      return plugin.optimized;\n    }).map(function (plugin) {\n      return plugin.optimized;\n    });\n\n    // only enable the cache map if we have optimized plugins\n    if (renderer.optimizedPlugins.length > 0) {\n      renderer.cacheMap = {};\n      renderer.unoptimizedPlugins = renderer.plugins.filter(function (plugin) {\n        return !plugin.optimized;\n      });\n    }\n  }\n\n  if (config.enhancers) {\n    arrayEach(config.enhancers, function (enhancer) {\n      renderer = enhancer(renderer);\n    });\n  }\n\n  return renderer;\n}"]},"metadata":{},"sourceType":"module"}