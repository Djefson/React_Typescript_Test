{"ast":null,"code":"/* eslint-disable consistent-return */\nimport objectEach from 'fast-loops/lib/objectEach';\nimport { RULE_TYPE, KEYFRAME_TYPE, FONT_TYPE, STATIC_TYPE, CLEAR_TYPE, generateCSSRule } from 'fela-utils';\nimport getNodeFromCache from './getNodeFromCache';\nimport insertRule from './insertRule';\nexport default function createSubscription(renderer) {\n  var targetDocument = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n  return function (change) {\n    if (change.type === CLEAR_TYPE) {\n      objectEach(renderer.nodes, function (node) {\n        return node.parentNode.removeChild(node);\n      });\n      renderer.nodes = {};\n      renderer.scoreIndex = {};\n      return;\n    }\n\n    var node = getNodeFromCache(change, renderer, targetDocument);\n\n    switch (change.type) {\n      case KEYFRAME_TYPE:\n        if (node.textContent.indexOf(change.keyframe) === -1) {\n          node.textContent += change.keyframe;\n        }\n\n        break;\n\n      case FONT_TYPE:\n        if (node.textContent.indexOf(change.fontFace) === -1) {\n          node.textContent += change.fontFace;\n        }\n\n        break;\n\n      case STATIC_TYPE:\n        var css = change.selector ? generateCSSRule(change.selector, change.css) : change.css;\n\n        if (node.textContent.indexOf(css) === -1) {\n          node.textContent += css;\n        }\n\n        break;\n\n      case RULE_TYPE:\n        insertRule(change, renderer, node);\n        break;\n\n      default:\n        // TODO: warning\n        break;\n    }\n  };\n}","map":{"version":3,"sources":["C:/Users/jophy/Documents/volvo-cars/node_modules/fela-dom/es/dom/connection/createSubscription.js"],"names":["objectEach","RULE_TYPE","KEYFRAME_TYPE","FONT_TYPE","STATIC_TYPE","CLEAR_TYPE","generateCSSRule","getNodeFromCache","insertRule","createSubscription","renderer","targetDocument","arguments","length","undefined","document","change","type","nodes","node","parentNode","removeChild","scoreIndex","textContent","indexOf","keyframe","fontFace","css","selector"],"mappings":"AACA;AACA,OAAOA,UAAP,MAAuB,2BAAvB;AACA,SAASC,SAAT,EAAoBC,aAApB,EAAmCC,SAAnC,EAA8CC,WAA9C,EAA2DC,UAA3D,EAAuEC,eAAvE,QAA8F,YAA9F;AAEA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,OAAOC,UAAP,MAAuB,cAAvB;AAEA,eAAe,SAASC,kBAAT,CAA4BC,QAA5B,EAAsC;AACnD,MAAIC,cAAc,GAAGC,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoEG,QAAzF;AAEA,SAAO,UAAUC,MAAV,EAAkB;AACvB,QAAIA,MAAM,CAACC,IAAP,KAAgBZ,UAApB,EAAgC;AAC9BL,MAAAA,UAAU,CAACU,QAAQ,CAACQ,KAAV,EAAiB,UAAUC,IAAV,EAAgB;AACzC,eAAOA,IAAI,CAACC,UAAL,CAAgBC,WAAhB,CAA4BF,IAA5B,CAAP;AACD,OAFS,CAAV;AAIAT,MAAAA,QAAQ,CAACQ,KAAT,GAAiB,EAAjB;AACAR,MAAAA,QAAQ,CAACY,UAAT,GAAsB,EAAtB;AACA;AACD;;AAED,QAAIH,IAAI,GAAGZ,gBAAgB,CAACS,MAAD,EAASN,QAAT,EAAmBC,cAAnB,CAA3B;;AAEA,YAAQK,MAAM,CAACC,IAAf;AACE,WAAKf,aAAL;AACE,YAAIiB,IAAI,CAACI,WAAL,CAAiBC,OAAjB,CAAyBR,MAAM,CAACS,QAAhC,MAA8C,CAAC,CAAnD,EAAsD;AACpDN,UAAAA,IAAI,CAACI,WAAL,IAAoBP,MAAM,CAACS,QAA3B;AACD;;AACD;;AACF,WAAKtB,SAAL;AACE,YAAIgB,IAAI,CAACI,WAAL,CAAiBC,OAAjB,CAAyBR,MAAM,CAACU,QAAhC,MAA8C,CAAC,CAAnD,EAAsD;AACpDP,UAAAA,IAAI,CAACI,WAAL,IAAoBP,MAAM,CAACU,QAA3B;AACD;;AACD;;AACF,WAAKtB,WAAL;AACE,YAAIuB,GAAG,GAAGX,MAAM,CAACY,QAAP,GAAkBtB,eAAe,CAACU,MAAM,CAACY,QAAR,EAAkBZ,MAAM,CAACW,GAAzB,CAAjC,GAAiEX,MAAM,CAACW,GAAlF;;AAEA,YAAIR,IAAI,CAACI,WAAL,CAAiBC,OAAjB,CAAyBG,GAAzB,MAAkC,CAAC,CAAvC,EAA0C;AACxCR,UAAAA,IAAI,CAACI,WAAL,IAAoBI,GAApB;AACD;;AACD;;AACF,WAAK1B,SAAL;AACEO,QAAAA,UAAU,CAACQ,MAAD,EAASN,QAAT,EAAmBS,IAAnB,CAAV;AACA;;AACF;AACE;AACA;AAvBJ;AAyBD,GAtCD;AAuCD","sourcesContent":["\n/* eslint-disable consistent-return */\nimport objectEach from 'fast-loops/lib/objectEach';\nimport { RULE_TYPE, KEYFRAME_TYPE, FONT_TYPE, STATIC_TYPE, CLEAR_TYPE, generateCSSRule } from 'fela-utils';\n\nimport getNodeFromCache from './getNodeFromCache';\nimport insertRule from './insertRule';\n\nexport default function createSubscription(renderer) {\n  var targetDocument = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document;\n\n  return function (change) {\n    if (change.type === CLEAR_TYPE) {\n      objectEach(renderer.nodes, function (node) {\n        return node.parentNode.removeChild(node);\n      });\n\n      renderer.nodes = {};\n      renderer.scoreIndex = {};\n      return;\n    }\n\n    var node = getNodeFromCache(change, renderer, targetDocument);\n\n    switch (change.type) {\n      case KEYFRAME_TYPE:\n        if (node.textContent.indexOf(change.keyframe) === -1) {\n          node.textContent += change.keyframe;\n        }\n        break;\n      case FONT_TYPE:\n        if (node.textContent.indexOf(change.fontFace) === -1) {\n          node.textContent += change.fontFace;\n        }\n        break;\n      case STATIC_TYPE:\n        var css = change.selector ? generateCSSRule(change.selector, change.css) : change.css;\n\n        if (node.textContent.indexOf(css) === -1) {\n          node.textContent += css;\n        }\n        break;\n      case RULE_TYPE:\n        insertRule(change, renderer, node);\n        break;\n      default:\n        // TODO: warning\n        break;\n    }\n  };\n}"]},"metadata":{},"sourceType":"module"}